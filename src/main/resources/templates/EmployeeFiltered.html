<!DOCTYPE html>
<html lang="en">

<!--head tag start-->
<span th:insert="fragments/headTagFragment"></span>
<!--head tag end-->

<body>
<!-- container section start -->
<section class="" id="container">

	<!--header start-->
	<div th:insert="fragments/header_Ui_Fragment"></div>
	<!--header end-->

	<!--sidebar start-->
	<div th:insert="fragments/sidebarFragment"></div>
	<!--sidebar end-->

	<!--main content start-->
	<section id="main-content">
		<section class="wrapper">
			<div class="row">
				<div class="col-lg-12">
					<h3 class="page-header"><i class="fa fa fa-bars"></i> List of Employees</h3>
					<ol class="breadcrumb">
						<li><i class="fa fa-home"></i><a href="index.html">Home</a></li>
						<li><i class="fa fa-bars"></i>Pages</li>
						<li><i class="fa fa-square-o"></i>Pages</li>
					</ol>
				</div>
			</div>
			<!-- page start-->


			<div class="row">
				<div class="col-lg-12">
					<section class="panel">
						<header class="panel-heading">
							Advanced Table
						</header>
						<button class="btn btn-primary" data-target="#addModal" data-toggle="modal" type="button">Add
							New
						</button>

						<input id="txtSearch" name="keyword" type="text">

						<table class="table table-striped table-advance table-hover" id="employeeTable">
							<tbody>
							<tr>
								<th>Photo</th>
								<th><i class="icon_profile"></i> Full Name</th>
								<th><i class="icon_calendar"></i>Hire Date</th>
								<th><i class="icon_mail_alt"></i> Email</th>
								<th><i class="icon_pin_alt"></i> City</th>
								<th><i class="icon_mobile"></i> Phone</th>
								<th><i class="icon_cogs"></i> Action</th>
							</tr>
							<tr th:each="employee:${employees}">
								<td>
									<a id="photoButton" th:href="@{'/img/photos/' + ${employee.username} +'.jpg'}">
										<img height="40" th:src="@{'/img/photos/' + ${employee.username} +'.jpg'}"
										     width="40">
									</a>
								</td>
								<td th:text="${employee.firstname} + ' ' + ${employee.lastname}">Fullname</td>
								<td th:text="${employee.hireDate}">HireDate</td>
								<td th:text="${employee.email}">Email</td>
								<td th:text="${employee.city}">City</td>
								<td th:text="${employee.phone}">Phone</td>
								<td>
									<div class="btn-group">
										<a class="btn btn-primary" id="editButton"
										   th:href="@{/employees/findById/(id=${employee.id})}"><i
												class="icon_pencil-edit"></i></a>
										<a class="btn btn-success" id="detailsButton"
										   th:href="@{/employees/findById/(id=${employee.id})}"><i
												class="icon_document_alt"></i></a>
										<a class="btn btn-danger" id="deleteButton"
										   th:href="@{/employees/delete/(id=${employee.id})}"><i
												class="icon_close_alt2"></i></a>
									</div>
								</td>
							</tr>
							</tbody>
						</table>
					</section>
				</div>
			</div>


			<!-- page end-->
		</section>
	</section>
	<!--main content end-->
	<div class="text-right">
		<div class="credits">
			<!--
			  All the links in the footer should remain intact.
			  You can delete the links only if you purchased the pro version.
			  Licensing information: https://bootstrapmade.com/license/
			  Purchase the pro version form: https://bootstrapmade.com/buy/?theme=NiceAdmin
			-->
			Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
		</div>
	</div>
</section>
<!-- container section end -->


<div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="addModal" role="dialog"
     tabindex="-1">
	<form method="post" th:action="@{/employees/addNew}">
		<div class="modal-dialog modal-lg" role="document" style="width:70%">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">New Employee Record</h5>
					<button aria-label="Close" class="close" data-dismiss="modal" type="button">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form>
						<table width="100%">
							<tr>
								<td width="50%">

									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtIdAdd">Id: </label>
										<div class="col-sm-6">
											<input class="form-control" disabled id="txtIdAdd" name="id"
											       placeholder="Id" type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="ddlTitleAdd">Title: </label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlTitleAdd" name="title">
												<option>-SELECT-</option>
												<option value="MALE">Mr.</option>
												<option value="FEMAL">Ms.</option>
											</select>
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtInitialsAdd">Initials: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtInitialsAdd" name="initials"
											       placeholder="Initials"
											       type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtSSNAdd">Social Security
											No.: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtSSNAdd" name="socialSecurityNumber"
											       placeholder="Social Security Number" type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtFirtnameAdd">Firstname: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtFirstnameAdd" name="firstname"
											       placeholder="Firstname" type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtLastnameAdd">Lastname: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtLastnameAdd" name="lastname"
											       placeholder="Lastname"
											       type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtOthernameAdd">Othername: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtOthernameAdd" name="othername"
											       placeholder="Othername" type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="ddlGenderAdd">Gender: </label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlGenderAdd" name="gender">
												<option>-SELECT-</option>
												<option value="MALE">MALE</option>
												<option value="FEMALE">FEMALE</option>
											</select>
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label"
										       for="ddlNationalityAdd">Nationality: </label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlNationalityAdd" name="countryid">
												<option>-SELECT-</option>
												<option th:each="country : ${countries}"
												        th:text="${country.description}"
												        th:value="${country.id}">
												</option>
											</select>
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtAddressAdd">Address</label>
										<div class="col-sm-6">
											<textarea class="form-control" id="txtAddressAdd" name="address"
											          placeholder="Address" rows="2"></textarea>
										</div>
									</div>
								</td>
								<td style="padding-left:10px" width="50%">
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtDateOfBirthAdd">Date of
											Birth:</label>
										<div class="col-sm-6">
											<input class="form-control" id="txtDateOfBirthAdd" name="DateOfBirth"
											       placeholder="Date of Birth" type="date">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtHireDateAdd">Hire Date:</label>
										<div class="col-sm-6">
											<input class="form-control" id="txtHireDateAdd" name="hireDate"
											       placeholder="Hire Date"
											       type="date">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label"
										       for="ddlStateAdd">State/Province: </label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlStateAdd" name="stateid">
												<option>-SELECT-</option>
												<option th:each="state : ${states}"
												        th:text="${state.name}"
												        th:value="${state.id}">
												</option>
											</select>
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtCityAdd">City: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtCityAdd" name="city" placeholder="City"
											       type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtPhoneAdd">Phone: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtPhoneAdd" name="phone"
											       placeholder="Phone"
											       type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtMobileAdd">Mobile: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtMobileAdd" name="mobile"
											       placeholder="Mobile"
											       type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtMaritalStatusAdd">Marital
											Status: </label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlMaritalStatusAdd" name="maritalStatus">
												<option>-SELECT-</option>
												<option value="Married">Married</option>
												<option value="Single">Single</option>
											</select>
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtEmailAdd">Email</label>
										<div class="col-sm-6">
											<input class="form-control" id="txtEmailAdd" name="email"
											       placeholder="Email"
											       type="email">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="ddlJobTitleAdd">Job Title</label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlJobTitleAdd" name="jobtitleid">
												<option>-SELECT-</option>
												<option th:each="jobTitle : ${jobTitles}"
												        th:text="${jobTitle.description}"
												        th:value="${jobTitle.id}">
												</option>
											</select>
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="ddlEmpoloyeeTypeAdd">Employee
											Type</label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlEmployeeTypeAdd" name="employeetypeid">
												<option>-SELECT-</option>
												<option th:each="employeeType : ${employeeTypes}"
												        th:text="${employeeType.description}"
												        th:value="${employeeType.id}">
												</option>
											</select>
										</div>
									</div>

								</td>
							</tr>
						</table>
						<hr>
					</form>
				</div>
				<div class="modal-footer">
					<button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
					<button class="btn btn-primary" type="submit">Save</button>
				</div>
			</div>
		</div>
	</form>
</div>

<div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="editModal" role="dialog"
     tabindex="-1">
	<form method="post" th:action="@{/employees/addNew}">
		<div class="modal-dialog modal-lg" role="document" style="width:70%">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Edit Employee Record</h5>
					<button aria-label="Close" class="close" data-dismiss="modal" type="button">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form>
						<table width="100%">
							<tr>
								<td width="50%">

									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtIdEdit">Id: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtIdEdit" name="id" placeholder="Id"
											       type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="ddlTitleEdit">Title: </label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlTitleEdit" name="title">
												<option>-SELECT-</option>
												<option value="Mr.">Mr.</option>
												<option value="Ms.">Ms.</option>
											</select>
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtInitialsEdit">Initials: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtInitialsEdit" name="initials"
											       placeholder="Initials"
											       type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtSSNEdit">Social Security
											No.: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtSSNEdit" name="socialSecurityNumber"
											       placeholder="Social Security Number" type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtFirtnameEdit">Firstname: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtFirstnameEdit" name="firstname"
											       placeholder="Firstname" type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtLastnameEdit">Lastname: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtLastnameEdit" name="lastname"
											       placeholder="Lastname"
											       type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label"
										       for="txtOthernameEdit">Othername: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtOthernameEdit" name="othername"
											       placeholder="Othername" type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="ddlGenderEdit">Gender: </label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlGenderEdit" name="gender">
												<option>-SELECT-</option>
												<option value="MALE">MALE</option>
												<option value="FEMALE">FEMALE</option>
											</select>
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label"
										       for="ddlNationalityEdit">Nationality: </label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlNationalityEdit" name="countryid">
												<option>-SELECT-</option>
												<option th:each="country : ${countries}"
												        th:text="${country.description}"
												        th:value="${country.id}">
												</option>
											</select>
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtAddressEdit">Address</label>
										<div class="col-sm-6">
											<textarea class="form-control" id="txtAddressEdit" name="address"
											          placeholder="Address" rows="2"></textarea>
										</div>
									</div>
								</td>
								<td style="padding-left:10px" width="50%">
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtDateOfBirthEdit">Date of
											Birth:</label>
										<div class="col-sm-6">
											<input class="form-control" id="txtDateOfBirthEdit" name="DateOfBirth"
											       placeholder="Date of Birth" type="date">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtHireDateEdit">Hire Date:</label>
										<div class="col-sm-6">
											<input class="form-control" id="txtHireDateEdit" name="hireDate"
											       placeholder="Hire Date"
											       type="date">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label"
										       for="ddlStateEdit">State/Province: </label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlStateEdit" name="stateid">
												<option>-SELECT-</option>
												<option th:each="state : ${states}"
												        th:text="${state.name}"
												        th:value="${state.id}">
												</option>
											</select>
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtCityEdit">City: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtCityEdit" name="city" placeholder="City"
											       type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtPhoneEdit">Phone: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtPhoneEdit" name="phone"
											       placeholder="Phone"
											       type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtMobileEdit">Mobile: </label>
										<div class="col-sm-6">
											<input class="form-control" id="txtMobileEdit" name="mobile"
											       placeholder="Mobile"
											       type="text">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtMaritalStatusEdit">Marital
											Status: </label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlMaritalStatusEdit" name="maritalStatus">
												<option>-SELECT-</option>
												<option value="orange">Married</option>
												<option value="pear">Single</option>
											</select>
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="txtEmailEdit">Email</label>
										<div class="col-sm-6">
											<input class="form-control" id="txtEmailEdit" name="email"
											       placeholder="Email"
											       type="email">
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="ddlJobTitleEdit">Job Title</label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlJobTitleEdit" name="jobtitleid">
												<option>-SELECT-</option>
												<option th:each="jobTitle : ${jobTitles}"
												        th:text="${jobTitle.description}"
												        th:value="${jobTitle.id}">
												</option>
											</select>
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="ddlEmployeeTypeEdit">Employee
											Type</label>
										<div class="col-sm-6">
											<select class="form-control" id="ddlEmployeeTypeEdit" name="employeetypeid">
												<option>-SELECT-</option>
												<option th:each="employeeType : ${employeeTypes}"
												        th:text="${employeeType.description}"
												        th:value="${employeeType.id}">
												</option>
											</select>
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-4 col-form-label" for="flpImageEdit">Select Image: </label>
										<div class="col-sm-6">
											<input class="form-control-file" id="fupImageEdit" name="photo"
											       placeholder="Select File"
											       type="file">
										</div>
									</div>
								</td>
							</tr>
						</table>
						<button class="btn btn-primary" type="submit">Sign in</button>
					</form>
				</div>
				<div class="modal-footer">
					<button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
					<button class="btn btn-primary" type="submit">Save</button>
				</div>
			</div>
		</div>
	</form>
</div>

<div class="modal" id="deleteModal" role="dialog" tabindex="-1">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Confirm delete</h5>
				<button aria-label="Close" class="close" data-dismiss="modal" type="button">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				Are you sure you want to delete the selected record?
			</div>
			<div class="modal-footer">
				<a class="btn btn-primary" href="" id="confirmDelete">Yes, Delete</a>
				<button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="photoModal" role="dialog" tabindex="-1">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Photo</h5>
				<button aria-label="Close" class="close" data-dismiss="modal" type="button">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<img height="95%" id="employeePhoto" src="" width="95%">
			</div>
			<div class="modal-footer">
				<button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
			</div>
		</div>
	</div>
</div>

<!-- javascripts -->
<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<!-- nice scroll -->
<script src="js/jquery.scrollTo.min.js"></script>
<script src="js/jquery.nicescroll.js" type="text/javascript"></script>
<!--custome script for all page-->
<script src="js/scripts.js"></script>

<script src="js/employee.js"></script>

<script th:inline="javascript">

    /*<![CDATA[*/
    var employees = /*[[${employees}]]*/;
    /*]]>*/

    $('#txtSearch').on('keyup', function () {
        var value = $(this).val();

        //Get Filtered employee list
        var data = FilterFunction(value, employees);

        //Clear the table and rebuild using new filtered data
        rebuildTable(data)
    });


    function FilterFunction(value, data) {
        var filteredData = [];
        for (var i = 0; i < data.length; i++) {
            value = value.toLowerCase();
            var fname = data[i].firstname.toLowerCase();
            var lname = data[i].lastname.toLowerCase();

            if (fname.includes(value) || lname.includes(value)) {
                filteredData.push(data[i]);
            }
        }
        return filteredData;
    }


    function rebuildTable(data) {
        var table = document.getElementById('employeeTable')
        table.innerHTML = ''
        for (var i = 0; i < data.length; i++) {
            var row = `<tr>
								<td>${data[i].firstname}</td>
								<td>${data[i].lastname}</td>
								<td>${data[i].phone}</td>
								<td>${data[i].email}</td>
								<td>${data[i].city}</td>
				          </tr>`
            table.innerHTML += row
        }
    }


</script>

</body>

</html>
